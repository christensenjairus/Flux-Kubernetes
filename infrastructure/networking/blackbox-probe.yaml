apiVersion: operator.victoriametrics.com/v1beta1
kind: VMProbe
metadata:
  name: blackbox-cilium
  namespace: kube-system
spec:
  jobName: blackbox-cilium
  vmProberSpec:
     # by default scheme http, and path is /probe
     url: prometheus-blackbox-exporter.monitoring.svc.cluster.local:9115
  module: http_2xx
  targets:
   staticConfig:
      targets:
      - "cilium-envoy.kube-system.svc.cluster.local:9964/metrics"
      - "cilium-operator.kube-system.svc.cluster.local:9963/metrics"
      - "clustermesh-apiserver.kube-system.svc.cluster.local:9962"
      - "clustermesh-apiserver-metrics.kube-system.svc.cluster.local:9962/metrics"
      - "hubble-metrics.kube-system.svc.cluster.local:9965/metrics"
      - "hubble-peer.kube-system.svc.cluster.local:4244"
      - "hubble-relay.kube-system.svc.cluster.local:4245"
      - "hubble-ui.kube-system.svc.cluster.local:8081"
      - "kube-dns.kube-system.svc.cluster.local:9153/metrics"
  interval: 5s