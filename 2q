# Please edit the object below. Lines beginning with a '#' will be ignored,
# and an empty file will abort the edit. If an error occurs while saving this file will be
# reopened with the relevant failures.
#
apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
  creationTimestamp: "2024-05-06T22:08:17Z"
  finalizers:
  - finalizers.fluxcd.io
  generation: 2
  labels:
    kustomize.toolkit.fluxcd.io/name: infra-certificates
    kustomize.toolkit.fluxcd.io/namespace: flux-system
  name: cert-manager
  namespace: cert-manager
  resourceVersion: "87331"
  uid: 438debb3-89cc-451d-abfa-0204c6092667
spec:
  chart:
    spec:
      chart: cert-manager
      interval: 12h
      reconcileStrategy: ChartVersion
      sourceRef:
        kind: HelmRepository
        name: cert-manager
        namespace: cert-manager
      version: 1.x
  interval: 30m
  values:
    extraArgs:
    - --dns01-recursive-nameservers=1.1.1.1:53,1.0.0.1:53
    - --dns01-recursive-nameservers-only
    - --feature-gates=ExperimentalGatewayAPISupport=true
    installCRDs: true
    nodeSelector:
      nodeclass: general
    podDnsConfig:
      nameservers:
      - 1.1.1.1
      - 1.0.0.1
    podDnsPolicy: None
    prometheus:
      enabled: true
      servicemonitor:
        enabled: true
    replicaCount: 3
status:
  conditions:
  - lastTransitionTime: "2024-05-06T22:10:44Z"
    message: Running 'install' action with timeout of 5m0s
    observedGeneration: 2
    reason: Progressing
    status: "True"
    type: Reconciling
  - lastTransitionTime: "2024-05-06T22:10:49Z"
    message: 'Helm install failed for release cert-manager/cert-manager with chart
      cert-manager@v1.14.5: Unable to continue with install: CustomResourceDefinition
      "clusterissuers.cert-manager.io" in namespace "" exists and cannot be imported
      into the current release: invalid ownership metadata; annotation validation
      error: missing key "meta.helm.sh/release-name": must be set to "cert-manager";
      annotation validation error: missing key "meta.helm.sh/release-namespace": must
      be set to "cert-manager"'
    observedGeneration: 2
    reason: InstallFailed
    status: "False"
    type: Ready
  - lastTransitionTime: "2024-05-06T22:10:49Z"
    message: 'Helm install failed for release cert-manager/cert-manager with chart
      cert-manager@v1.14.5: Unable to continue with install: CustomResourceDefinition
      "clusterissuers.cert-manager.io" in namespace "" exists and cannot be imported
      into the current release: invalid ownership metadata; annotation validation
      error: missing key "meta.helm.sh/release-name": must be set to "cert-manager";
      annotation validation error: missing key "meta.helm.sh/release-namespace": must
      be set to "cert-manager"'
    observedGeneration: 2
    reason: InstallFailed
    status: "False"
    type: Released
  failures: 1
  helmChart: cert-manager/cert-manager-cert-manager
  lastAttemptedConfigDigest: sha256:4523aba686bb0fa3cff328a81f966fc0fb1f07bdef03063c482a50455d287885
  lastAttemptedGeneration: 2
  lastAttemptedReleaseAction: install
  lastAttemptedRevision: v1.14.5
  observedGeneration: -1
  storageNamespace: cert-manager
